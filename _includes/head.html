{% include base_path %}

<meta charset="utf-8">

{% include seo.html %}

<link href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}" type="application/atom+xml" rel="alternate" title="{{ site.title }} Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/main.css">

<meta http-equiv="cleartype" content="on">


<!-- ==================== Prism.js 代码高亮 ==================== -->
<!-- Prism.js 核心样式 -->
<link rel="stylesheet" href="链接3">
<link rel="stylesheet" href="链接4">
<link rel="stylesheet" href="链接5">

<!-- 可选插件样式 -->
<link rel="stylesheet" href="prism-command-line.css">
<link rel="stylesheet" href="prism-line-highlight.css">
<link rel="stylesheet" href="prism-diff-highlight.css">

<!-- Prism.js 核心脚本 -->
<script src="链接6"></script>
<script src="链接7"></script>
<script src="链接8"></script>

<!-- 核心功能插件 -->
<script src="链接1"></script>
<script src="链接2"></script>

<!-- 增强功能插件 -->
<script src="prism-command-line.js"></script>
<script src="prism-line-highlight.js"></script>
<script src="prism-diff-highlight.js"></script>
<script src="prism-match-braces.js"></script>

<script>
// Prism.js 配置
document.addEventListener('DOMContentLoaded', function() {
    if (typeof Prism !== 'undefined') {
        // 配置 Prism
        Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        
        // 手动高亮所有代码块
        Prism.highlightAll();
        
        console.log('Prism.js 初始化完成');
    }
});
</script>

<!-- ==================== 新增：mermaid支持 ==================== -->
<!-- Mermaid JS -->
{% if site.mermaid and site.mermaid.enable %}
<script src="{% if site.mermaid.cdn %}{{ site.mermaid.cdn }}{% else %}https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js{% endif %}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (typeof mermaid === 'undefined') return;
    
    mermaid.initialize({
        startOnLoad: false,
        theme: 'default',
        securityLevel: 'loose',
        flowchart: { useMaxWidth: false, htmlLabels: true }
    });
    
    // 转换代码块
    const mermaidBlocks = document.querySelectorAll('code.language-mermaid');
    mermaidBlocks.forEach(function(block) {
        const pre = block.parentElement;
        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = block.textContent;
        pre.parentNode.replaceChild(mermaidDiv, pre);
    });
    
    // 渲染图表
    mermaid.init();
});
</script>
{% endif %}